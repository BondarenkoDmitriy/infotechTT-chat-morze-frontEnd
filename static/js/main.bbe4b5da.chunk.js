(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(35),r=n.n(a),o=(n(44),n(11)),i=n(28),u=n(27),l=(n(45),n(24)),j=Object(l.a)("http://localhost:5000"),d=j,b=n(37),m=new(n.n(b).a);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return m.randomUUID(e)}var O,h=n(23),v=n.n(h),g=n(39),p=n(38),x=(n(65),n(0)),_=function(e){var t=e.message,n=e.username,c=e.role;return Object(x.jsxs)("div",{className:v()("message",{message__sender:t.from===n,message__receiver:t.from!==n,message__newby:"newby"===c}),children:[t.from,":",Object(x.jsx)("br",{})," ",t.text,"newby"===c&&Object(x.jsx)("span",{className:"message__eye-icon",children:Object(x.jsx)(g.a,{icon:p.a,title:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442",onClick:function(){var e;e=t,d.emit("decoderMorseMessage",{from:n,text:e.text,messageId:e.id})}})})]})},y=Object(c.memo)((function(e){var t=e.children,n=e.classes,c=e.onClick;return Object(x.jsx)("button",{type:"button",className:"".concat(n),onClick:c,children:t})})),N=(n(67),Object(c.memo)((function(e){var t=e.placeholder,n=e.classes,c=e.onChange,s=e.value,a=e.required;return Object(x.jsx)("input",{type:"text",className:"".concat(n),onChange:c,placeholder:t,value:s,required:a})}))),w=function(e){var t=e.username,n=Object(c.useState)(""),s=Object(o.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(null),u=Object(o.a)(i,2),l=u[0],j=u[1],b=Object(c.useState)(""),m=Object(o.a)(b,2),f=m[0],O=m[1];return Object(x.jsxs)("div",{className:"inputs",children:[Object(x.jsxs)("label",{children:["Welcome:",t]}),Object(x.jsx)(N,{placeholder:"Recipient Name",value:null!==f&&void 0!==f?f:"",onChange:function(e){return O(e.target.value)},classes:"inputs__field"}),Object(x.jsx)(N,{placeholder:"Type your message...",value:a,onChange:function(e){var t=e.target.value,n=!1;t.split("").forEach((function(e){"."!==e&&"-"!==e&&" "!==e&&(j("Please enter Morse code characters only (. or -)"),n=!0)})),n||(j(null),r(t))},classes:v()("inputs__field",{"inputs__field--error":l})}),l&&Object(x.jsx)("div",{className:"error-message",children:l}),Object(x.jsx)(y,{onClick:function(){""!==a.trim()&&d.emit("privateMessage",{toUser:f,fromUser:t,text:a.trim()}),r("")},classes:"inputs__field inputs__field--button",children:"Send"})]})},C=Object(l.a)("http://localhost:5000"),S=function(e){var t=e.username,n=e.role,a=Object(c.useState)([]),r=Object(o.a)(a,2),l=r[0],d=r[1];return Object(c.useEffect)((function(){var e;return e=function(e){console.log("New chat message received:",e),d((function(t){return[].concat(Object(u.a)(t),[{from:e.from,text:e.text,id:f()}])}))},j.on("chat message",(function(t){e(t)})),function(e){j.on("privateMessage",(function(t){e(t)}))}((function(e){console.log("New private message received:",e),d((function(t){return[].concat(Object(u.a)(t),[{from:e.fromUser,text:e.message,id:f()}])}))})),function(e){j.on("updateMessage",(function(t){e(t)}))}((function(e){console.log("onUpdateMessage",e),d((function(t){return t.map((function(t){return t.id===e.messageId?Object(i.a)(Object(i.a)({},t),{},{text:e.text}):t}))}))})),function(e){j.on("disconnect",(function(){console.log("Disconnected from server"),e()}))}((function(){console.log("Disconnected from server",C.id)})),function(){C.disconnect()}}),[]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"chat__container",children:[Object(x.jsx)("div",{className:"chat__body",id:"message-container",children:l.map((function(e){return Object(x.jsx)(s.a.Fragment,{children:Object(x.jsx)(_,{message:e,role:n,username:t})},e.from)}))}),Object(x.jsx)(w,{username:t})]})})};!function(e){e.User="user",e.Admin="admin",e.Newby="newby"}(O||(O={}));n(68);var U=function(e){var t=e.onLogin,n=Object(c.useState)(""),s=Object(o.a)(n,2),a=s[0],r=s[1],i=Object(c.useState)(O.User),u=Object(o.a)(i,2),l=u[0],d=u[1];return Object(x.jsxs)("div",{className:"authorization",children:[Object(x.jsx)(N,{placeholder:"Your Name",value:a,onChange:function(e){return r(e.target.value)},classes:"authorization__field authorization__field__name"}),Object(x.jsxs)("select",{value:l,onChange:function(e){return d(e.target.value)},className:"authorization__field",children:[Object(x.jsx)("option",{value:O.User,children:"User"}),Object(x.jsx)("option",{value:O.Admin,children:"Admin"}),Object(x.jsx)("option",{value:O.Newby,children:"Newby"})]}),Object(x.jsx)(y,{onClick:function(){""!==a.trim()&&(t(a,l),function(e,t){j.emit("authorize",{username:e,role:t})}(a,l))},classes:"authorization__field",children:"Login"})]})},k=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(O.User),r=Object(o.a)(a,2),i=r[0],u=r[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),d=j[0],b=j[1];return Object(x.jsx)("div",{children:d&&i?Object(x.jsx)(S,{username:n,role:i}):Object(x.jsx)(U,{onLogin:function(e,t){s(e),u(t),b(!0)}})})};r.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(k,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.bbe4b5da.chunk.js.map